version: 1
frontend:
  phases:
    preBuild:
      commands:
        - yarn install
    build:
      commands:
        - VITE_APES_AUTH_SECRET_KEY=${VITE_APES_AUTH_SECRET_KEY}
        - VITE_ANGEL_AUTH_SECRET_KEY=${VITE_ANGEL_AUTH_SECRET_KEY}
        - VITE_KADO_API_KEY=${VITE_KADO_API_KEY}
        - VITE_NETWORK=${VITE_NETWORK}
        - VITE_JUNO_LCD_NODE=${VITE_JUNO_LCD_NODE}
        - VITE_APP_TYPE=${VITE_APP_TYPE}
        - VITE_APP_NAME=${VITE_APP_NAME}
        - VITE_BASE_DOMAIN=${VITE_BASE_DOMAIN}
        - VITE_DAPP_DOMAIN=${VITE_DAPP_DOMAIN}
        - VITE_EMAIL_SUPPORT=${VITE_EMAIL_SUPPORT}
        - VITE_SEO_IMAGE=${VITE_SEO_IMAGE}
        - VITE_LOGO_IMG_DARK=${VITE_LOGO_IMG_DARK}
        - VITE_LOGO_IMG_LIGHT=${VITE_LOGO_IMG_LIGHT}
        - VITE_SENTRY_DSN=${VITE_SENTRY_DSN}
        - VITE_SUBGRAPH_API_KEY=${VITE_SUBGRAPH_API_KEY}
        - VITE_INFURA_ID=${VITE_INFURA_ID}
        - VITE_WEB3AUTH_CLIENT_ID=${VITE_WEB3AUTH_CLIENT_ID}
        - IS_TESTNET=${IS_TESTNET}
        - IS_TEST=${IS_TEST}
        - export NODE_OPTIONS="--max-old-space-size=8192"
        - yarn run build
  artifacts:
    baseDirectory: build
    files:
      - "**/*"
  cache:
    paths:
